<!doctype html>
<html lang="zh">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Twitter红心点赞CSS3动画</title>
    <link rel="stylesheet" type="text/css" href="index.css">
</head>

<body>
    <article class="htmleaf-container">
        <div id="container">
            <div class="feed" id="feed1">
                <div class="heart " id='heart' onclick='_click(this)'></div>
            </div>
        </div>
    </article>
    <!-- <script src="../js/jquery-1.8.3.min.js" type="text/javascript"></script> -->
</body>

</html>
<script>
var heart = document.getElementById('heart');
var flag = true;

function _click(arg) {
    if (!flag) {
        return
    }
    flag = false;
    addClass(heart, "heartAnimation")
    setTimeout(() => {
        removeClass(heart, "heartAnimation")
        flag = true;
    }, 500)
}

function addClass(obj, cls) {
    var obj_class = obj.className,
        added,
        blank = (obj_class != '') ? ' ' : '';
    if (obj_class.indexOf(cls) >= 0) {
        added = obj_class;
    } else {
        added = obj_class + blank + cls;
    }
    obj.className = added;
}

function removeClass(obj, cls) {
    var obj_class = ' ' + obj.className + ' ';
    obj_class = obj_class.replace(/(\s+)/gi, ' '),
        removed = obj_class.replace(' ' + cls + ' ', ' ');
    removed = removed.replace(/(^\s+)|(\s+$)/g, '');
    obj.className = removed;
}
</script>
